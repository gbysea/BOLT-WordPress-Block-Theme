.aura-background {
  position: fixed;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  z-index: var(--z-background);
  pointer-events: none;
  overflow: hidden;
}

.aura-layer {
  position: absolute;
  top: -50%;
  left: -50%;
  width: 200%;
  height: 200%;
  opacity: var(--aura-opacity-min);
  filter: blur(var(--aura-blur-radius));
  mix-blend-mode: var(--aura-blend-mode);
  transition: opacity var(--transition-aura) var(--ease-in-out);
  will-change: transform, opacity;
  transform: translateZ(0);
  backface-visibility: hidden;
}

.aura-layer-primary {
  background: radial-gradient(circle at 50% 50%, var(--category-color, var(--color-top)) 0%, transparent 70%);
  animation: auraPulse var(--aura-pulse-duration) ease-in-out infinite;
}

.aura-layer-secondary {
  background: radial-gradient(circle at 30% 70%, var(--category-color-light, var(--color-top-light)) 0%, transparent 60%);
  animation: auraPulse var(--aura-pulse-duration) ease-in-out infinite reverse;
  animation-delay: calc(var(--aura-pulse-duration) / 2);
}

.aura-layer-tertiary {
  background: radial-gradient(circle at 70% 30%, var(--category-color-dark, var(--color-top-dark)) 0%, transparent 50%);
  animation: auraFloat calc(var(--aura-pulse-duration) * 1.5) ease-in-out infinite;
}

@keyframes auraPulse {
  0%, 100% {
    opacity: var(--aura-opacity-min);
    transform: scale(0.95) rotate(0deg);
  }
  50% {
    opacity: var(--aura-opacity-max);
    transform: scale(1.05) rotate(180deg);
  }
}

@keyframes auraPulseReverse {
  0%, 100% {
    opacity: var(--aura-opacity-min);
    transform: scale(0.95) rotate(360deg);
  }
  50% {
    opacity: var(--aura-opacity-max);
    transform: scale(1.05) rotate(180deg);
  }
}

@keyframes auraFloat {
  0%, 100% {
    opacity: calc(var(--aura-opacity-min) * 0.7);
    transform: translate(0, 0) scale(1);
  }
  33% {
    opacity: calc(var(--aura-opacity-max) * 0.7);
    transform: translate(10%, -5%) scale(1.03);
  }
  66% {
    opacity: calc(var(--aura-opacity-min) * 0.7);
    transform: translate(-5%, 10%) scale(0.97);
  }
}

.aura-top .aura-layer-primary { animation-duration: 2000ms; animation-name: auraPulse; }
.aura-up .aura-layer-primary { animation-duration: 2500ms; animation-name: auraPulseReverse; mix-blend-mode: screen; }
.aura-charm .aura-layer-primary { animation-duration: 3500ms; animation-name: auraPulse; }
.aura-bottom .aura-layer-primary { animation-duration: 4500ms; animation-name: auraPulseReverse; }
.aura-down .aura-layer-primary { animation-duration: 4000ms; animation-name: auraPulse; }

.aura-strange .aura-layer-primary {
  animation: auraStrange 3000ms ease-in-out infinite;
  animation-name: auraPulseReverse;
}

@keyframes auraStrange {
  0%, 100% { opacity: var(--aura-opacity-min); transform: scale(0.9) rotate(0deg); }
  25% { opacity: var(--aura-opacity-max); transform: scale(1.1) rotate(90deg); }
  50% { opacity: var(--aura-opacity-min); transform: scale(0.95) rotate(180deg); }
  75% { opacity: calc(var(--aura-opacity-max) * 0.8); transform: scale(1.05) rotate(270deg); }
}

.aura-content {
  position: relative;
  z-index: var(--z-base);
}

@media (prefers-reduced-motion: reduce) {
  .aura-layer {
    animation: none !important;
    opacity: calc(var(--aura-opacity-min) * 0.5);
  }
}
